!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("lodash"),require("superagent-bluebird-promise")):"function"==typeof define&&define.amd?define(["lodash","superagent-bluebird-promise"],i):t.imgur=i(t._,t.request)}(this,function(t,i){"use strict";var r={API_URL:"https://api.imgur.com",API_VERSION:"3",CLIENT_ID:"",buildOptions:function(t,i,r){var e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return{apiUrl:t,path:i,method:r,body:e}},bearer:""},e=function(t){["method","apiUrl","path","body"].forEach(function(i){if(!t[i])throw new Error(i+" must be specified")});var e="Client-ID "+r.CLIENT_ID;return r.bearer&&(e="Bearer "+r.bearer),i[t.method](t.apiUrl+"/"+t.path).send(t.body).set("Authorization",e).promise()},n=function(i){return i.imgurAPICall=t.bind(e,i),i.apiUrl=i.apiUrl||r.API_URL+"/"+r.API_VERSION,i},s={path:"account",apiUrl:r.API_URL+"/"+r.API_VERSION},o=n(t.extend({},s,{get:function(t){var i=r.buildOptions(this.apiUrl,this.path+"/"+t,"get");return this.imgurAPICall(i)},submissions:n(t.extend({},s,{get:function(t){var i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],e=this.path+"/"+t+"/submissions/"+i,n=r.buildOptions(this.apiUrl,e,"get");return this.imgurAPICall(n)}}))})),a=n({path:"image",apiUrl:r.API_URL+"/"+r.API_VERSION,get:function(t){var i=r.buildOptions(this.apiUrl,this.path+"/"+t,"get");return this.imgurAPICall(i)},upload:function(t){var i=r.buildOptions(this.apiUrl,""+this.path,"post",t);return this.imgurAPICall(i)}}),u=n({path:"oauth2",apiUrl:r.API_URL,getAuthUrl:function(t){var i=t||"code",e="?"+["response_type="+i,"client_id="+r.CLIENT_ID].join("&"),n=this.path+"/authorize"+e;return this.apiUrl+"/"+n},get:function(t){var i=t||"token",e="?"+["response_type="+i,"client_id="+r.CLIENT_ID].join("&"),n=this.path+"/authorize"+e,s=r.buildOptions(this.apiUrl,n,"get");return this.imgurAPICall(s)},exchange:function(t,i,e){var n=t||"code",s="code"===n?"authorization_code":n,o={client_id:r.CLIENT_ID,client_secret:e,grant_type:s};o[n]=i;var a=this.path+"/token",u=r.buildOptions(this.apiUrl,a,"post",o);return this.imgurAPICall(u)},refresh:function(t,i){var e="?"+["refresh_token="+t,"client_id="+r.CLIENT_ID,"client_secret="+i,"grant_type=refresh_token"].join("&"),n=this.path+"/token"+e,s=r.buildOptions(this.apiUrl,n,"post");return this.imgurAPICall(s)}}),h=n({path:"topics",apiUrl:r.API_URL+"/"+r.API_VERSION,get:function(t){var i=arguments.length<=1||void 0===arguments[1]?"viral":arguments[1],e=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=this.path+"/"+t+"/"+i+"/"+e,s=r.buildOptions(this.apiUrl,n,"get");return this.imgurAPICall(s)},getDefaults:function(){var t=this.path+"/defaults",i=r.buildOptions(this.apiUrl,t,"get");return this.imgurAPICall(i)}}),l={path:"gallery",apiUrl:r.API_URL+"/"+r.API_VERSION},p=n(t.extend({},l,{REASON_DOES_NOT_BELONG_ON_IMGUR:1,get:function(t){var i=this.path+"/"+t,e=r.buildOptions(this.apiUrl,i,"get");return this.imgurAPICall(e)},report:function(t){var i=arguments.length<=1||void 0===arguments[1]?this.REASON_DOES_NOT_BELONG_ON_IMGUR:arguments[1];if(!t)throw new Error("hash must be specified");if("number"!=typeof i)throw new Error("the reason must be an integer");var e=this.path+"/"+t+"/report",n=r.buildOptions(this.apiUrl,e,"post",{reason:i});return this.imgurAPICall(n)},_handleVote:function(t,i){if(!t)throw new Error("hash must be specified");var e=this.path+"/"+t+"/vote/"+i,n=r.buildOptions(this.apiUrl,e,"post");return this.imgurAPICall(n)},upvote:function(t){return this._handleVote(t,"up")},downvote:function(t){return this._handleVote(t,"down")},favorite:function(t,i){if(!t)throw new Error("hash must be specified");if(void 0===i||"boolean"!=typeof i)throw new Error("isAlbum with type boolean must be specified");var e=i?"album":"image",n=e+"/"+t+"/favorite",s=r.buildOptions(this.apiUrl,n,"post");return this.imgurAPICall(s)},comments:n(t.extend({},l,{get:function(t){var i=arguments.length<=1||void 0===arguments[1]?"best":arguments[1],e=this.path+"/"+t+"/comments/"+i,n=r.buildOptions(this.apiUrl,e,"get");return this.imgurAPICall(n)}}))})),m=n({path:"gallery",apiUrl:r.API_URL+"/"+r.API_VERSION,get:function(){var t=arguments.length<=0||void 0===arguments[0]?"hot":arguments[0],i=arguments.length<=1||void 0===arguments[1]?"viral":arguments[1],e=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],s=this.path+"/"+t+"/"+i+"/"+e+"?showViral="+n,o=r.buildOptions(this.apiUrl,s,"get");return this.imgurAPICall(o)},post:p}),g=n({path:"comment",apiUrl:r.API_URL+"/"+r.API_VERSION,REASON_DOES_NOT_BELONG_ON_IMGUR:1,get:function(t){if(!t)throw new Error("commentId must be specified");var i=this.path+"/"+t,e=r.buildOptions(this.apiUrl,i,"get");return this.imgurAPICall(e)},downvote:function(t){if(!t)throw new Error("commentId must be specified");var i=this.path+"/"+t+"/vote/down",e=r.buildOptions(this.apiUrl,i,"post");return this.imgurAPICall(e)},upvote:function(t){if(!t)throw new Error("commentId must be specified");var i=this.path+"/"+t+"/vote/up",e=r.buildOptions(this.apiUrl,i,"post");return this.imgurAPICall(e)},report:function(t){var i=arguments.length<=1||void 0===arguments[1]?this.REASON_DOES_NOT_BELONG_ON_IMGUR:arguments[1];if(!t)throw new Error("commentId must be specified");if("number"!=typeof i)throw new Error("the reason must be an integer");var e=this.path+"/"+t+"/report",n=r.buildOptions(this.apiUrl,e,"post",{reason:i});return this.imgurAPICall(n)},deleteComment:function(t){if(!t)throw new Error("commentId must be specified");var i=this.path+"/"+t,e=r.buildOptions(this.apiUrl,i,"del");return this.imgurAPICall(e)},submitComment:function(t){["image_id","comment"].forEach(function(i){if(console.log(!t[i]),!t[i])throw new Error(i+" must be specified")});var i=r.buildOptions(this.apiUrl,this.path,"post",t);return this.imgurAPICall(i)},submitReply:function(t){["image_id","comment","parent_id"].forEach(function(i){if(!t[i])throw new Error(i+" must be specified")});var i=r.buildOptions(this.apiUrl,this.path,"post",t);return this.imgurAPICall(i)}}),d=function(t,i){var n=function(t,i){r[t]=i},s=function(t){return r[t]};if(!t)throw new Error("Client Key required to initialize imgur client");return n("CLIENT_ID",t),i&&n("bearer",i),{imgurAPICall:e,CLIENT_ID:t,account:o,image:a,oauth2:u,topics:h,gallery:m,comment:g,setUtil:n,getUtil:s}};return d});
//# sourceMappingURL=imgur.min.js.map
